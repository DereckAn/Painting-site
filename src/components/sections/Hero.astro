---
/**
 * Hero Section
 * Sección principal con imagen de fondo, título, subtítulo y CTA
 * Totalmente responsivo usando dvh para mejor soporte móvil
 */

import Button from "@/components/ui/Button.astro";
import Container from "@/components/ui/Container.astro";
import { HERO_CONTENT } from "@/constants/content";

interface Props {
  title?: string;
  subtitle?: string;
  ctaText?: string;
  ctaLink?: string;
  backgroundImage?: string;
}

const {
  title = HERO_CONTENT.title,
  subtitle = HERO_CONTENT.subtitle,
  ctaText = HERO_CONTENT.ctaText,
  ctaLink = HERO_CONTENT.ctaLink,
  backgroundImage = "https://images.unsplash.com/photo-1562259949-e8e7689d7828?q=80&w=2000",
} = Astro.props;
---

<section
  id="hero"
  class="relative h-dvh min-h-[600px] w-full overflow-hidden"
  aria-label="Hero Section"
>
  <!-- Background Image con Overlay -->
  <div class="absolute inset-0 z-0">
    <!-- Imagen de fondo -->
    <div
      class="absolute inset-0 bg-cover bg-center bg-no-repeat"
      style={{
        backgroundImage: `linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('${backgroundImage}')`,
        backgroundSize: "cover",
        backgroundPosition: "center",
      }}
      role="img"
      aria-label="Pintura profesional con rodillo"
    >
    </div>
  </div>

  <div class="absolute inset-0 bg-black/50"></div>

  <!-- Contenido -->
  <Container class="relative z-10 h-full">
    <div class="flex h-full flex-col items-center justify-center text-center">
      <!-- Título Principal con animación SVG -->
      <div class="relative mb-6">
        <!-- SVG animado detrás del título -->
        <div
          class="paint-bg absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 opacity-100"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 854.55 353.99"
            preserveAspectRatio="xMidYMid meet"
            class="w-[600px] h-auto sm:w-[700px] md:w-[800px] lg:w-[1100px]"
            aria-hidden="true"
          >
            <g>
              <polyline
                class="paint-path opacity-100"
                points="74.49 42.43 62.47 309.56 181.63 32.45 195.34 303.45 339.26 36.08 347.15 321.54 504.12 32.45 513.96 325.79 608.59 67.15 612.41 308.31 747.9 44.93 787.26 315.8"
              ></polyline>
            </g>
          </svg>
        </div>

        <!-- Título que se revela -->
        <h1
          class="relative z-10 max-w-5xl font-serif text-4xl font-bold leading-tight text-black sm:text-5xl md:text-6xl lg:text-7xl"
        >
          {title}
        </h1>
      </div>

      <!-- Subtítulo -->
      <p
        class="mb-10 mt-30 2xl:mt-40 max-w-3xl text-base leading-relaxed text-gray-100 sm:text-lg md:text-xl"
      >
        {subtitle}
      </p>

      <!-- CTA Button -->
      <div class="flex gap-10 xl:gap-20">
        <Button>
          <span class="text-2xl hover-brush">GET YOUR FREE QUOTE</span>
        </Button>
        <Button href={ctaLink}
          variant="normal">
          <span class="text-2xl hover-brush">{ctaText}</span>
        </Button>
      </div>

      <!-- Scroll Indicator (opcional) -->
      <div class="absolute bottom-10 left-1/2 -translate-x-1/2">
        <a
          href="#services"
          class="flex flex-col items-center gap-2 text-white transition-opacity hover:opacity-100"
          aria-label="Desplazarse a servicios"
        >
          <span class="text-sm uppercase tracking-wider">Descubre más</span>
          <svg
            class="h-6 w-6 animate-bounce"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
            aria-hidden="true"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
          </svg>
        </a>
      </div>
    </div>
  </Container>
</section>

<style>
  /* Asegurar que el hero sea accesible en diferentes dispositivos */
  @media (max-width: 640px) {
    h1 {
      font-size: clamp(2rem, 8vw, 3rem);
    }
  }

  /* Smooth scroll para los enlaces internos */
  html {
    scroll-behavior: smooth;
  }

  /* Animación de líneas de pintura estilo rodillo */
  .paint-bg {
    pointer-events: none;
  }

  .paint-path {
    fill: none;
    stroke: #ffffff;
    stroke-width: 140;
    /* Longitud aproximada del path - ajustar según sea necesario */
    stroke-dasharray: 3000;
    stroke-dashoffset: 3000;
    /* Animar el trazo del path */
    animation: drawPath 3s ease-out forwards;
  }

  /* Animación para dibujar el path (efecto de rodillo pintando) */
  @keyframes drawPath {
    from {
      stroke-dashoffset: 3000;
    }
    to {
      stroke-dashoffset: 0;
    }
  }

  /* Reducir el movimiento para usuarios que lo prefieren */
  @media (prefers-reduced-motion: reduce) {
    .paint-path {
      animation: none;
      stroke-dashoffset: 0;
      stroke-width: 150;
    }
  }
</style>
